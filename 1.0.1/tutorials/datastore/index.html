
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Comprehensive guide to the CoAL data store: a powerful data management solution">
      
      
      
        <link rel="canonical" href="https://cosmo-tech.github.io/CosmoTech-Acceleration-Library/1.0.1/tutorials/datastore/">
      
      
        <link rel="prev" href="../csm-data/">
      
      
        <link rel="next" href="../../csm-data/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Datastore - Cosmotech Acceleration Library Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/templates.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Datastore - Cosmotech Acceleration Library Docs" >
      
        <meta  property="og:description"  content="Comprehensive guide to the CoAL data store: a powerful data management solution" >
      
        <meta  property="og:image"  content="https://cosmo-tech.github.io/CosmoTech-Acceleration-Library/1.0.1/assets/images/social/tutorials/datastore.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://cosmo-tech.github.io/CosmoTech-Acceleration-Library/1.0.1/tutorials/datastore/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Datastore - Cosmotech Acceleration Library Docs" >
      
        <meta  name="twitter:description"  content="Comprehensive guide to the CoAL data store: a powerful data management solution" >
      
        <meta  name="twitter:image"  content="https://cosmo-tech.github.io/CosmoTech-Acceleration-Library/1.0.1/assets/images/social/tutorials/datastore.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#datastore" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Cosmotech Acceleration Library Docs" class="md-header__button md-logo" aria-label="Cosmotech Acceleration Library Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cosmotech Acceleration Library Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Datastore
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Cosmo-Tech/CosmoTech-Acceleration-Library" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Cosmo-Tech/CosmoTech-Acceleration-Library
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../dependencies/" class="md-tabs__link">
          
  
  
    
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../csm-data/" class="md-tabs__link">
          
  
  
    
  
  csm-data

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cosmotech Acceleration Library Docs" class="md-nav__button md-logo" aria-label="Cosmotech Acceleration Library Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Cosmotech Acceleration Library Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Cosmo-Tech/CosmoTech-Acceleration-Library" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Cosmo-Tech/CosmoTech-Acceleration-Library
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pull_request/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pull Request Checklist
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing to CoAL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cosmotech-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with the CosmoTech API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csm-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSM-DATA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Datastore
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Datastore
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="In this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      In this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-the-datastore" class="md-nav__link">
    <span class="md-ellipsis">
      What is the datastore?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-use-the-datastore" class="md-nav__link">
    <span class="md-ellipsis">
      Why use the datastore?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Why use the datastore?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format-flexibility" class="md-nav__link">
    <span class="md-ellipsis">
      Format Flexibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Persistence and Performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-query-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Query Capabilities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simplified-data-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Simplified Data Pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-example" class="md-nav__link">
    <span class="md-ellipsis">
      Basic example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-different-data-formats" class="md-nav__link">
    <span class="md-ellipsis">
      Working with different data formats
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working with different data formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#csv-files" class="md-nav__link">
    <span class="md-ellipsis">
      CSV Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pandas-dataframes" class="md-nav__link">
    <span class="md-ellipsis">
      Pandas DataFrames
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyarrow-tables" class="md-nav__link">
    <span class="md-ellipsis">
      PyArrow Tables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced use cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced use cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#joining-multiple-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Joining multiple tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-transformation-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Data transformation pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-and-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Best practices and tips
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-cosmotech-ecosystem" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with CosmoTech ecosystem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../csm-data/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    csm-data
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            csm-data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/adx-send-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    adx-send-data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/adx-send-runnerdata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    adx-send-runnerdata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/az-storage-upload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    az-storage-upload
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/s3-bucket-delete/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    s3-bucket-delete
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/s3-bucket-download/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    s3-bucket-download
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/s3-bucket-upload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    s3-bucket-upload
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Api
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Api
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../csm-data/api/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8_1" id="__nav_4_8_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_1">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/postgres-send-runner-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    postgres-send-runner-metadata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/rds-load-csv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    rds-load-csv
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/rds-send-csv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    rds-send-csv
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/rds-send-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    rds-send-store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/run-load-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    run-load-data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/runtemplate-load-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    runtemplate-load-handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/tdl-load-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    tdl-load-files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/tdl-send-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    tdl-send-files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/wsf-load-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    wsf-load-file
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/api/wsf-send-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    wsf-send-file
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Store
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Store
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../csm-data/store/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Store
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_9_1" id="__nav_4_9_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9_1">
            <span class="md-nav__icon md-icon"></span>
            Store
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/store/dump-to-azure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dump-to-azure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/store/dump-to-postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dump-to-postgresql
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/store/dump-to-s3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dump-to-s3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/store/list-tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    list-tables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/store/load-csv-folder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    load-csv-folder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/store/load-from-singlestore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    load-from-singlestore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/store/rds-send-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    rds-send-store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csm-data/store/reset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    reset
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="In this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      In this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-the-datastore" class="md-nav__link">
    <span class="md-ellipsis">
      What is the datastore?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-use-the-datastore" class="md-nav__link">
    <span class="md-ellipsis">
      Why use the datastore?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Why use the datastore?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format-flexibility" class="md-nav__link">
    <span class="md-ellipsis">
      Format Flexibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Persistence and Performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-query-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Query Capabilities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simplified-data-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Simplified Data Pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-example" class="md-nav__link">
    <span class="md-ellipsis">
      Basic example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-different-data-formats" class="md-nav__link">
    <span class="md-ellipsis">
      Working with different data formats
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working with different data formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#csv-files" class="md-nav__link">
    <span class="md-ellipsis">
      CSV Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pandas-dataframes" class="md-nav__link">
    <span class="md-ellipsis">
      Pandas DataFrames
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyarrow-tables" class="md-nav__link">
    <span class="md-ellipsis">
      PyArrow Tables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced use cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced use cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#joining-multiple-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Joining multiple tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-transformation-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Data transformation pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-and-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Best practices and tips
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-cosmotech-ecosystem" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with CosmoTech ecosystem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="datastore">Datastore<a class="headerlink" href="#datastore" title="Permanent link">&para;</a></h1>
<div class="admonition abstract">
<p class="admonition-title">Objective</p>
<ul>
<li>Understand what the CoAL datastore is and its capabilities</li>
<li>Learn how to store and retrieve data in various formats</li>
<li>Master SQL querying capabilities for data analysis</li>
<li>Build efficient data processing pipelines</li>
</ul>
</div>
<h2 id="what-is-the-datastore">What is the datastore?<a class="headerlink" href="#what-is-the-datastore" title="Permanent link">&para;</a></h2>
<p>The datastore is a powerful data management abstraction that provides a unified interface to a SQLite database. It allows you to store, retrieve, transform, and query tabular data in various formats through a consistent API.</p>
<p>The core idea behind the datastore is to provide a robust, flexible system for data management that simplifies working with different data formats while offering persistence and advanced query capabilities.</p>
<div class="admonition info">
<p class="admonition-title">Key Features</p>
<ul>
<li>Format flexibility (Python dictionaries, CSV files, Pandas DataFrames, PyArrow Tables)</li>
<li>Persistent storage in SQLite</li>
<li>SQL query capabilities</li>
<li>Simplified data pipeline management</li>
</ul>
</div>
<h2 id="why-use-the-datastore">Why use the datastore?<a class="headerlink" href="#why-use-the-datastore" title="Permanent link">&para;</a></h2>
<h3 id="format-flexibility">Format Flexibility<a class="headerlink" href="#format-flexibility" title="Permanent link">&para;</a></h3>
<p>The datastore works seamlessly with multiple data formats:</p>
<ul>
<li>Python dictionaries and lists</li>
<li>CSV files</li>
<li>Pandas DataFrames</li>
<li>PyArrow Tables</li>
</ul>
<p>This flexibility eliminates the need for manual format conversions and allows you to work with data in your preferred format.</p>
<h3 id="persistence-and-performance">Persistence and Performance<a class="headerlink" href="#persistence-and-performance" title="Permanent link">&para;</a></h3>
<p>Instead of keeping all your data in memory or writing/reading from files repeatedly, the datastore:</p>
<ul>
<li>Persists data in a SQLite database</li>
<li>Provides efficient storage and retrieval</li>
<li>Handles large datasets that might not fit in memory</li>
<li>Maintains data between application runs</li>
</ul>
<h3 id="sql-query-capabilities">SQL Query Capabilities<a class="headerlink" href="#sql-query-capabilities" title="Permanent link">&para;</a></h3>
<p>The datastore leverages the power of SQL:</p>
<ul>
<li>Filter, aggregate, join, and transform data using familiar SQL syntax</li>
<li>Execute complex queries without writing custom data manipulation code</li>
<li>Perform operations that would be cumbersome with file-based approaches</li>
</ul>
<h3 id="simplified-data-pipeline">Simplified Data Pipeline<a class="headerlink" href="#simplified-data-pipeline" title="Permanent link">&para;</a></h3>
<p>The datastore serves as a central hub in your data processing pipeline:</p>
<ul>
<li>Import data from various sources</li>
<li>Transform and clean data</li>
<li>Query and analyze data</li>
<li>Export results in different formats</li>
</ul>
<h2 id="basic-example">Basic example<a class="headerlink" href="#basic-example" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Basic use of the datastore</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.store</span><span class="w"> </span><span class="kn">import</span> <span class="n">Store</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.native_python</span><span class="w"> </span><span class="kn">import</span> <span class="n">store_pylist</span>

<span class="c1"># We initialize and reset the data store</span>
<span class="n">my_datastore</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># We create a simple list of dict data</span>
<span class="n">my_data</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;barbar&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;world&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">}]</span>

<span class="c1"># We use a bundled method to send the py_list to the store</span>
<span class="n">store_pylist</span><span class="p">(</span><span class="s2">&quot;my_data&quot;</span><span class="p">,</span> <span class="n">my_data</span><span class="p">)</span>

<span class="c1"># We can make a sql query over our data</span>
<span class="c1"># Store.execute_query returns a pyarrow.Table object so we can make use of Table.to_pylist to get an equivalent format</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">my_datastore</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span><span class="s2">&quot;SELECT foo, count(*) as line_count FROM my_data GROUP BY foo&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_pylist</span><span class="p">()</span>

<span class="c1"># We can print our results now</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="c1"># &gt; [{&#39;foo&#39;: &#39;bar&#39;, &#39;line_count&#39;: 2}, {&#39;foo&#39;: &#39;barbar&#39;, &#39;line_count&#39;: 1}, {&#39;foo&#39;: &#39;world&#39;, &#39;line_count&#39;: 1}]</span>
</code></pre></div></td></tr></table></div>
<h2 id="working-with-different-data-formats">Working with different data formats<a class="headerlink" href="#working-with-different-data-formats" title="Permanent link">&para;</a></h2>
<p>The datastore provides specialized adapters for working with various data formats:</p>
<h3 id="csv-files">CSV Files<a class="headerlink" href="#csv-files" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Working with CSV files</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.store</span><span class="w"> </span><span class="kn">import</span> <span class="n">Store</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.csv</span><span class="w"> </span><span class="kn">import</span> <span class="n">store_csv_file</span><span class="p">,</span> <span class="n">convert_store_table_to_csv</span>

<span class="c1"># Initialize the store</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Load data from a CSV file</span>
<span class="n">csv_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;path/to/your/data.csv&quot;</span><span class="p">)</span>
<span class="n">store_csv_file</span><span class="p">(</span><span class="s2">&quot;customers&quot;</span><span class="p">,</span> <span class="n">csv_path</span><span class="p">)</span>

<span class="c1"># Query the data</span>
<span class="n">high_value_customers</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SELECT * FROM customers </span>
<span class="sd">    WHERE annual_spend &gt; 10000</span>
<span class="sd">    ORDER BY annual_spend DESC</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>

<span class="c1"># Export results to a new CSV file</span>
<span class="n">output_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;path/to/output/high_value_customers.csv&quot;</span><span class="p">)</span>
<span class="n">convert_store_table_to_csv</span><span class="p">(</span><span class="s2">&quot;high_value_customers&quot;</span><span class="p">,</span> <span class="n">output_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="pandas-dataframes">Pandas DataFrames<a class="headerlink" href="#pandas-dataframes" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Working with pandas DataFrames</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.store</span><span class="w"> </span><span class="kn">import</span> <span class="n">Store</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.pandas</span><span class="w"> </span><span class="kn">import</span> <span class="n">store_dataframe</span><span class="p">,</span> <span class="n">convert_store_table_to_dataframe</span>

<span class="c1"># Initialize the store</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Create a pandas DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;product_id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="s2">&quot;product_name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Widget A&quot;</span><span class="p">,</span> <span class="s2">&quot;Widget B&quot;</span><span class="p">,</span> <span class="s2">&quot;Gadget X&quot;</span><span class="p">,</span> <span class="s2">&quot;Tool Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Device Z&quot;</span><span class="p">],</span>
        <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">19.99</span><span class="p">,</span> <span class="mf">29.99</span><span class="p">,</span> <span class="mf">99.99</span><span class="p">,</span> <span class="mf">49.99</span><span class="p">,</span> <span class="mf">199.99</span><span class="p">],</span>
        <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Widgets&quot;</span><span class="p">,</span> <span class="s2">&quot;Widgets&quot;</span><span class="p">,</span> <span class="s2">&quot;Gadgets&quot;</span><span class="p">,</span> <span class="s2">&quot;Tools&quot;</span><span class="p">,</span> <span class="s2">&quot;Devices&quot;</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Store the DataFrame</span>
<span class="n">store_dataframe</span><span class="p">(</span><span class="s2">&quot;products&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="c1"># Query the data</span>
<span class="n">expensive_products</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SELECT * FROM products</span>
<span class="sd">    WHERE price &gt; 50</span>
<span class="sd">    ORDER BY price DESC</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>

<span class="c1"># Convert results back to a pandas DataFrame for further analysis</span>
<span class="n">expensive_df</span> <span class="o">=</span> <span class="n">convert_store_table_to_dataframe</span><span class="p">(</span><span class="s2">&quot;expensive_products&quot;</span><span class="p">,</span> <span class="n">store</span><span class="p">)</span>

<span class="c1"># Use pandas methods on the result</span>
<span class="nb">print</span><span class="p">(</span><span class="n">expensive_df</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
<h3 id="pyarrow-tables">PyArrow Tables<a class="headerlink" href="#pyarrow-tables" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Working with PyArrow Tables directly</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.store</span><span class="w"> </span><span class="kn">import</span> <span class="n">Store</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">store_table</span>

<span class="c1"># Initialize the store</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Create a PyArrow Table</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2023-01-02&quot;</span><span class="p">,</span> <span class="s2">&quot;2023-01-03&quot;</span><span class="p">]),</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">]),</span>
    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">]),</span>
<span class="p">}</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pydict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Store the table</span>
<span class="n">store_table</span><span class="p">(</span><span class="s2">&quot;time_series&quot;</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>

<span class="c1"># Query and retrieve data</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SELECT date, SUM(value) as total_value</span>
<span class="sd">    FROM time_series</span>
<span class="sd">    GROUP BY date</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="advanced-use-cases">Advanced use cases<a class="headerlink" href="#advanced-use-cases" title="Permanent link">&para;</a></h2>
<h3 id="joining-multiple-tables">Joining multiple tables<a class="headerlink" href="#joining-multiple-tables" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Joining tables in the datastore</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.store</span><span class="w"> </span><span class="kn">import</span> <span class="n">Store</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.native_python</span><span class="w"> </span><span class="kn">import</span> <span class="n">store_pylist</span>

<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Store customer data</span>
<span class="n">customers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Acme Corp&quot;</span><span class="p">,</span> <span class="s2">&quot;segment&quot;</span><span class="p">:</span> <span class="s2">&quot;Enterprise&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Small Shop&quot;</span><span class="p">,</span> <span class="s2">&quot;segment&quot;</span><span class="p">:</span> <span class="s2">&quot;SMB&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Tech Giant&quot;</span><span class="p">,</span> <span class="s2">&quot;segment&quot;</span><span class="p">:</span> <span class="s2">&quot;Enterprise&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">store_pylist</span><span class="p">(</span><span class="s2">&quot;customers&quot;</span><span class="p">,</span> <span class="n">customers</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>

<span class="c1"># Store order data</span>
<span class="n">orders</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="mi">101</span><span class="p">,</span> <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="mi">102</span><span class="p">,</span> <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">7500</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="mi">104</span><span class="p">,</span> <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">store_pylist</span><span class="p">(</span><span class="s2">&quot;orders&quot;</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>

<span class="c1"># Join tables to analyze orders by customer segment</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SELECT c.segment, COUNT(o.order_id) as order_count, SUM(o.amount) as total_revenue</span>
<span class="sd">    FROM customers c</span>
<span class="sd">    JOIN orders o ON c.customer_id = o.customer_id</span>
<span class="sd">    GROUP BY c.segment</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_pylist</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="c1"># &gt; [{&#39;segment&#39;: &#39;Enterprise&#39;, &#39;order_count&#39;: 3, &#39;total_revenue&#39;: 22500}, {&#39;segment&#39;: &#39;SMB&#39;, &#39;order_count&#39;: 1, &#39;total_revenue&#39;: 500}]</span>
</code></pre></div></td></tr></table></div>
<h3 id="data-transformation-pipeline">Data transformation pipeline<a class="headerlink" href="#data-transformation-pipeline" title="Permanent link">&para;</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Complete pipeline</label><label for="__tabbed_1_2">Step-by-step</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Building a data transformation pipeline</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.store</span><span class="w"> </span><span class="kn">import</span> <span class="n">Store</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.native_python</span><span class="w"> </span><span class="kn">import</span> <span class="n">store_pylist</span><span class="p">,</span> <span class="n">convert_table_as_pylist</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.csv</span><span class="w"> </span><span class="kn">import</span> <span class="n">store_csv_file</span><span class="p">,</span> <span class="n">convert_store_table_to_csv</span>

<span class="c1"># Initialize the store</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 1. Load raw data from CSV</span>
<span class="n">raw_data_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;path/to/raw_data.csv&quot;</span><span class="p">)</span>
<span class="n">store_csv_file</span><span class="p">(</span><span class="s2">&quot;raw_data&quot;</span><span class="p">,</span> <span class="n">raw_data_path</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>

<span class="c1"># 2. Clean and transform the data</span>
<span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CREATE TABLE cleaned_data AS</span>
<span class="sd">    SELECT </span>
<span class="sd">        id,</span>
<span class="sd">        TRIM(name) as name,</span>
<span class="sd">        UPPER(category) as category,</span>
<span class="sd">        CASE WHEN value &lt; 0 THEN 0 ELSE value END as value</span>
<span class="sd">    FROM raw_data</span>
<span class="sd">    WHERE id IS NOT NULL</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>

<span class="c1"># 3. Aggregate the data</span>
<span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CREATE TABLE summary_data AS</span>
<span class="sd">    SELECT</span>
<span class="sd">        category,</span>
<span class="sd">        COUNT(*) as count,</span>
<span class="sd">        AVG(value) as avg_value,</span>
<span class="sd">        SUM(value) as total_value</span>
<span class="sd">    FROM cleaned_data</span>
<span class="sd">    GROUP BY category</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>

<span class="c1"># 4. Export the results</span>
<span class="n">summary_data</span> <span class="o">=</span> <span class="n">convert_table_as_pylist</span><span class="p">(</span><span class="s2">&quot;summary_data&quot;</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">summary_data</span><span class="p">)</span>

<span class="c1"># 5. Save to CSV for reporting</span>
<span class="n">output_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;path/to/output/summary.csv&quot;</span><span class="p">)</span>
<span class="n">convert_store_table_to_csv</span><span class="p">(</span><span class="s2">&quot;summary_data&quot;</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Step 1: Load data</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.store</span><span class="w"> </span><span class="kn">import</span> <span class="n">Store</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.csv</span><span class="w"> </span><span class="kn">import</span> <span class="n">store_csv_file</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>

<span class="c1"># Initialize the store</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Load raw data from CSV</span>
<span class="n">raw_data_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;path/to/raw_data.csv&quot;</span><span class="p">)</span>
<span class="n">store_csv_file</span><span class="p">(</span><span class="s2">&quot;raw_data&quot;</span><span class="p">,</span> <span class="n">raw_data_path</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Step 2: Clean data</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Clean and transform the data</span>
<span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CREATE TABLE cleaned_data AS</span>
<span class="sd">    SELECT </span>
<span class="sd">        id,</span>
<span class="sd">        TRIM(name) as name,</span>
<span class="sd">        UPPER(category) as category,</span>
<span class="sd">        CASE WHEN value &lt; 0 THEN 0 ELSE value END as value</span>
<span class="sd">    FROM raw_data</span>
<span class="sd">    WHERE id IS NOT NULL</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Step 3: Aggregate data</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Aggregate the data</span>
<span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CREATE TABLE summary_data AS</span>
<span class="sd">    SELECT</span>
<span class="sd">        category,</span>
<span class="sd">        COUNT(*) as count,</span>
<span class="sd">        AVG(value) as avg_value,</span>
<span class="sd">        SUM(value) as total_value</span>
<span class="sd">    FROM cleaned_data</span>
<span class="sd">    GROUP BY category</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Step 4: Export results</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.native_python</span><span class="w"> </span><span class="kn">import</span> <span class="n">convert_table_as_pylist</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cosmotech.coal.store.csv</span><span class="w"> </span><span class="kn">import</span> <span class="n">convert_store_table_to_csv</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>

<span class="c1"># Export to Python list</span>
<span class="n">summary_data</span> <span class="o">=</span> <span class="n">convert_table_as_pylist</span><span class="p">(</span><span class="s2">&quot;summary_data&quot;</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">summary_data</span><span class="p">)</span>

<span class="c1"># Save to CSV for reporting</span>
<span class="n">output_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;path/to/output/summary.csv&quot;</span><span class="p">)</span>
<span class="n">convert_store_table_to_csv</span><span class="p">(</span><span class="s2">&quot;summary_data&quot;</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h2 id="best-practices-and-tips">Best practices and tips<a class="headerlink" href="#best-practices-and-tips" title="Permanent link">&para;</a></h2>
<div class="admonition tip">
<p class="admonition-title">Store initialization</p>
<ul>
<li>Use <code>reset=True</code> when you want to start with a fresh database</li>
<li>Omit the reset parameter or set it to <code>False</code> when you want to maintain data between runs</li>
<li>Specify a custom location with the <code>store_location</code> parameter if needed</li>
</ul>
</div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Store initialization options</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Fresh store each time</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Persistent store at default location</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">()</span>

<span class="c1"># Persistent store at custom location</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>

<span class="n">custom_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/path/to/custom/location&quot;</span><span class="p">)</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">store_location</span><span class="o">=</span><span class="n">custom_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">Table management</p>
<ul>
<li>Use descriptive table names that reflect the data content</li>
<li>Check if tables exist before attempting operations</li>
<li>List available tables to explore the database</li>
</ul>
</div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Table management</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Check if a table exists</span>
<span class="k">if</span> <span class="n">store</span><span class="o">.</span><span class="n">table_exists</span><span class="p">(</span><span class="s2">&quot;customers&quot;</span><span class="p">):</span>
    <span class="c1"># Do something with the table</span>
    <span class="k">pass</span>

<span class="c1"># List all tables</span>
<span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="n">store</span><span class="o">.</span><span class="n">list_tables</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table: </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Get schema information</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_table_schema</span><span class="p">(</span><span class="n">table_name</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema: </span><span class="si">{</span><span class="n">schema</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Performance considerations</p>
<ul>
<li>For large datasets, consider chunking data when loading</li>
<li>Use SQL to filter data early rather than loading everything into memory</li>
<li>Index frequently queried columns for better performance</li>
</ul>
</div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Handling large datasets</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Example of chunking data load</span>
<span class="n">chunk_size</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">large_dataset</span><span class="p">),</span> <span class="n">chunk_size</span><span class="p">):</span>
    <span class="n">chunk</span> <span class="o">=</span> <span class="n">large_dataset</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">chunk_size</span><span class="p">]</span>
    <span class="n">store_pylist</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data_chunk_</span><span class="si">{</span><span class="n">i</span><span class="o">//</span><span class="n">chunk_size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>

<span class="c1"># Combine chunks with SQL</span>
<span class="n">store</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CREATE TABLE combined_data AS</span>
<span class="sd">    SELECT * FROM data_chunk_0</span>
<span class="sd">    UNION ALL</span>
<span class="sd">    SELECT * FROM data_chunk_1</span>
<span class="sd">    -- Add more chunks as needed</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="integration-with-cosmotech-ecosystem">Integration with CosmoTech ecosystem<a class="headerlink" href="#integration-with-cosmotech-ecosystem" title="Permanent link">&para;</a></h2>
<p>The datastore is designed to work seamlessly with other components of the CosmoTech Acceleration Library:</p>
<ul>
<li><strong>Data loading</strong>: Load data from various sources into the datastore</li>
<li><strong>Runner management</strong>: Store runner parameters and results</li>
<li><strong>API integration</strong>: Exchange data with CosmoTech APIs</li>
<li><strong>Reporting</strong>: Generate reports and visualizations from stored data</li>
</ul>
<p>This integration makes the datastore a central component in CosmoTech-based data processing workflows.</p>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>The datastore provides a powerful, flexible foundation for data management in your CosmoTech applications. By leveraging its capabilities, you can:</p>
<ul>
<li>Simplify data handling across different formats</li>
<li>Build robust data processing pipelines</li>
<li>Perform complex data transformations and analyses</li>
<li>Maintain data persistence between application runs</li>
<li>Integrate seamlessly with other CosmoTech components</li>
</ul>
<p>Whether you're working with small datasets or large-scale data processing tasks, the datastore offers the tools you need to manage your data effectively.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../csm-data/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CSM-DATA">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                CSM-DATA
              </div>
            </div>
          </a>
        
        
          
          <a href="../../csm-data/" class="md-footer__link md-footer__link--next" aria-label="Next: csm-data">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                csm-data
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
    
    Made by
    <a href="https://cosmotech.com/" target="_blank" rel="noopener">
        Cosmotech
    </a>
    <br/>
    <br/>
    <a href="#__consent">Change cookie settings</a>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.annotate", "content.tooltips", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top", "navigation.indexes", "navigation.instant", "navigation.footer"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../../javascript/tablesort.js"></script>
      
    
  </body>
</html>